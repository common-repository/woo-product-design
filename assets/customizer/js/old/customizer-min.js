(function(){rivets.binders.input={publishes:!0,routine:rivets.binders.value.routine,bind:function(a){return $(a).bind("input.rivets",this.publish)},unbind:function(a){return $(a).unbind("input.rivets")}},rivets.configure({prefix:"rv",adapter:{subscribe:function(a,b,c){return c.wrapped=function(a,b){return c(b)},a.on("change:"+b,c.wrapped)},unsubscribe:function(a,b,c){return a.off("change:"+b,c.wrapped)},read:function(a,b){return"cid"===b?a.cid:a.get(b)},publish:function(a,b,c){return a.cid?a.set(b,c):a[b]=c}}})}).call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};fabric.Canvas.prototype.getItemByMyID=function(a){var b,c,d,e;for(d=null,e=this.getObjects(),b=0,c=this.size();c>b;){if(e[b].id&&e[b].id===a){d=e[b];break}b++}return d},d=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.sync=function(){},b.prototype.defaults=function(){},b.prototype.indexInDOM=function(){var a,b=this;return a=$(".pc-layers-contianer.layers").filter(function(a,c){return $(c).data("id")===b.cid}),$(".pc-layers-contianer.layers").index(a)},b}(Backbone.DeepModel),c=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}return n(b,a),b.prototype.initialize=function(){return this.on("add",this.copyCidToModel)},b.prototype.model=d,b.prototype.nextOrder=function(){return this.length?this.last().get("order")+1:1},b.prototype._order_by="order",b.prototype.comparator=function(a){return a.get("order")},b.prototype.copyCidToModel=function(a){return a.attributes.cid=a.cid},b.prototype.copyCid=function(a){return a.cid=a.attributes.cid},b}(Backbone.Collection),g=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return n(c,a),c.prototype.className="pc-layers-wraper",c.prototype.events={"click li":"focusEditView","click .pc-layers-delete":"remove","click .pc-layers-lock-unlock":"lockUnlock"},c.prototype.initialize=function(a){return this.parentView=a.parentView,this.canvas=this.parentView.canvas},c.prototype.render=function(){var a,c;return c=this.canvas.getObjects(),a=b.templates["view/layers"]({layers:c}),this.$el.html(a),this.setSortable(),this},c.prototype.focusEditView=function(a){var b,c;return b=$(a.currentTarget).data("id"),c=this.canvas.getItemByMyID(b),this.canvas.setActiveObject(c),this.canvas.renderAll()},c.prototype.lockUnlock=function(a){var b,c,d;return"li"===$(a.currentTarget).prop("tagName")?(c=$(a.currentTarget).data("id"),b=$(a.currentTarget)):(c=$(a.currentTarget).closest("li").data("id"),b=$(a.currentTarget).closest("li")),d=this.canvas.getItemByMyID(c),d.locked===!1?(d.set({selectable:!1,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,lockRotation:!0,lockMovementX:!0,lockMovementY:!0,locked:!0,hasBorders:!1,hasControls:!1,hasRotatingPoint:!1,hoverCursor:"default"}),b.find(".fa-unlock").removeClass("fa-unlock").addClass("fa-lock")):(d.set({selectable:!0,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockRotation:!1,lockMovementX:!1,lockMovementY:!1,locked:!1,hasBorders:!0,hasControls:!0,hasRotatingPoint:!0}),b.find(".fa-lock").removeClass("fa-lock").addClass("fa-unlock")),this.canvas.discardActiveObject(),this.canvas.renderAll(),this.parentView.updateModel(c)},c.prototype.remove=function(a){var b,c,d;return"li"===$(a.currentTarget).prop("tagName")?(c=$(a.currentTarget).data("id"),b=$(a.currentTarget)):(c=$(a.currentTarget).closest("li").data("id"),b=$(a.currentTarget).closest("li")),d=this.canvas.getItemByMyID(c),d.remove(),b.remove(),this.parentView.getModel(c).destroy(),this.parentView.handleFormUpdate()},c.prototype.scrollLayerWrapper=function(a){var b,c;if("undefined"!=typeof this.$layerContainer&&0!==this.$layerContainer.length&&(c=$(this.$layerContainer).find("li.active"),"undefined"!=typeof c&&0!==c.length))return b=this.$layerContainer.offset().top+this.$layerContainer.height(),c.offset().top+c.height()>b?$(this.$layerContainer).animate({scrollTop:c.offset().top},200):void 0},c.prototype.setSortable=function(){var a=this;return this.$layerContainer=this.$el.find(".pc-layers-contianer"),this.$layerContainer?(this.$layerContainer.hasClass("ui-sortable")&&this.$layerContainer.sortable("destroy"),this.scroll="",a=this,this.$layerContainer.sortable({forcePlaceholderSize:!0,placeholder:"sortable-placeholder",containment:"parent",scrollSpeed:2,stop:function(c,d){return $(c.target).find("li").each(function(c){var d,e,f;return d=$(this).data("id"),$(this).data("order",c+1),$(this).attr("data-order",c+1),e=a.parentView.getModel(d),f=a.canvas.getItemByMyID(d),f.moveTo(c),e.set(b.options.mappings.LAYER_DATA+".order",c),e.set(b.options.mappings.LAYER_DATA+".zIndex",c),e.set("order",c),e.trigger("change")}),!0},update:function(a,b){return $(a.target).find("li").each(function(a){return $(this).data("order",a+1),$(this).attr("data-order",a+1)})},scroll:!0,scrollSensitivity:80,scrollSpeed:3,cursor:"move",tolerance:"pointer"})):void 0},c.prototype.forceRender=function(a){var b;return b=this.$el.scrollTop().valueOf(),this.render()},c}(Backbone.View),f=function(a){function c(){return k=c.__super__.constructor.apply(this,arguments)}return n(c,a),c.prototype.className="pc-edit-layer-wraper",c.prototype.events={"click li":"focusEditView"},c.prototype.initialize=function(a){var b;return this.parentView=a.parentView,this.layer=a.layer,this.model=a.layer.model,b=a.layer,this.canvas=b.canvas,b},c.prototype.render=function(){var a;return a=b.templates["edit/base"]({layer:this.layer,rf:this.model}),this.$el.html(a),this.setColorPicker(),this},c.prototype.setColorPicker=function(){var a,c;return c=this,a=this.layer.model.get(b.options.mappings.LAYER_DATA+".fill"),this.$el.find(".colorselector").ColorPicker({color:a,onShow:function(a){return $(a).fadeIn(500),!1},onHide:function(a){return $(a).fadeOut(500),!1},onChange:function(a,d,e){return $(".colorselector .background-color").css("backgroundColor","#"+d),c.layer.set("fill","#"+d),c.canvas.renderAll(),c.layer.model.set(b.options.mappings.LAYER_DATA+".fill","#"+d),c.layer.model.trigger("change")}})},c.prototype.forceRender=function(a){return this.render()},c}(Backbone.View),a=function(){function a(){}return a.prototype.update_layer=function(a,c){var d;return d=c.model.get(b.options.mappings.LAYER_DATA+".order"),void 0!==d?a.moveTo(d):void 0},a.prototype.add=function(a){return this[a.type](a)},a.prototype.text=function(a){var b,c,d,e;return d=a.template,c=d.options,b={},c=jQuery.extend(!0,{},this.getDefault(b,a),c),e=c.template.text?c.template.text:"",e=new fabric.Text(e,c),a.canvas.add(e).setActiveObject(e),this.update_layer(e,c)},a.prototype.rect=function(a){var b,c,d,e;return e=a.template,c=e.options,b={},c=jQuery.extend(!0,{},this.getDefault(b,a),c),d=new fabric.Rect(c),a.canvas.add(d).setActiveObject(d),this.update_layer(d,c)},a.prototype.image=function(a){var b,c,d,e;return e=this,d=a.template,c=d.options,b=fabric.Image.fromURL(d.url,function(b){var d;return d={width:b.width,height:b.height},c=jQuery.extend(!0,{},e.getDefault(d,a),c),b.set(c),a.canvas.add(b).setActiveObject(b),e.update_layer(b,c)})},a.prototype.getDefault=function(a,b){var c;return c={id:b.model.cid,model:b.model,template:b.template,locked:!1},jQuery.extend(!0,{},c,a)},a}(),e=function(d){function e(){return l=e.__super__.constructor.apply(this,arguments)}return n(e,d),e.prototype.SUBVIEWS=[],e.prototype.canvasView=new a,e.prototype.events={"click .js-save-form":"saveForm","click .fb-tabs a":"showTab","click .fb-add-field-types a":"addField","click #pc-text-panel .add-text":"addTextLayer"},e.prototype.initialize=function(a){var d,e;return d=a.selector,this.customizer=a.customizer,this.bootstrapData=a.bootstrapData,e=a.settings,null!=d&&this.setElement($(d)),null!=e&&(b.options.settings=e),void 0!==e.registerBackgrounds&&("object"==typeof e.registerBackgrounds||"array"==typeof e.registerBackgrounds)&&$.each(e.registerBackgrounds,function(a,c){return c.type="backgrounds",void 0===c.name&&(c.name=a),void 0===c.view&&(c.view=""),void 0===c.edit&&(c.edit=""),b.registerBackgrounds(a,c)}),void 0!==e.registerClipArts&&("object"==typeof e.registerClipArts||"array"==typeof e.registerClipArts)&&$.each(e.registerClipArts,function(a,c){return c.type="cliparts",void 0===c.name&&(c.name=a),void 0===c.view&&(c.view=""),void 0===c.edit&&(c.edit=""),b.registerClipArts(a,c)}),b.registerText(),this.collection=new c,this.collection.bind("add",this.addOne,this),this.collection.bind("reset",this.reset,this),this.collection.bind("change",this.handleFormUpdate,this),this.collection.bind("destroy add reset",this.hideShowNoResponseFields,this),this.collection.bind("destroy",this.ensureEditViewScrolled,this),this.render(),this.canvas.parentView=this,this.listenTo(this.canvas,"mouse:up",function(a){return this.isDown=!1}),this.listenTo(this.canvas,"mouse:down",function(a){return this.isDown=!0}),this.listenTo(this.canvas,"object:moving",this.objectMoveing),this.listenTo(this.canvas,"object:selected",this.objectSelected),this.listenTo(this.canvas,"object:modified",this.objectModified),this.listenTo(this.canvas,"before:selection:cleared",this.beforeSelectionCleared),this.collection.reset(this.bootstrapData),this.bindSaveEvent()},e.prototype.objectSelected=function(a){var b,c,d;return d=a.target.canvas.parentView,d.setLayersActive(a.target),c=new f({parentView:d,layer:a.target}),b=c.render().$el,d.$el.find("#pc-edit-layer").html(b)},e.prototype.beforeSelectionCleared=function(a){var b;return b=a.target.canvas.parentView,b.$el.find("#pc-edit-layer").html("")},e.prototype.objectModified=function(a){var b;return b=a.target.canvas.parentView,b.updateModel(a.target.id)},e.prototype.objectMoveing=function(a){var b;return b=a.target.canvas.parentView,b.updateModel(a.target.id)},e.prototype.bindSaveEvent=function(){var a=this;return this.formSaved=!0,this.saveFormButton=this.$el.find(".js-save-data"),this.saveFormButton.attr("disabled",!0).text(b.options.dict.ALL_CHANGES_SAVED),b.options.AUTOSAVE&&setInterval(function(){return a.saveForm.call(a)},5e3),$(window).bind("beforeunload",function(){return a.formSaved?void 0:b.options.dict.UNSAVED_CHANGES})},e.prototype.reset=function(){return this.addAll()},e.prototype.render=function(){var a,c,d,e,f,g;for(this.$el.html(b.templates.page()),this.hideShowNoResponseFields(),g=this.SUBVIEWS,e=0,f=g.length;f>e;e++)d=g[e],new d({parentView:this}).render();return c=$("<canvas/>"),this.$el.find(".pc-canvas").html(c),a=new fabric.Canvas(c[0]),a.setHeight(500),a.setWidth(800),this.canvas=a,this.randerLayers(),this},e.prototype.randerLayers=function(a){var b,c,d;return c=this.canvas.getObjects(),d=new g({parentView:this,canvas:this.canvas}),b=d.render().$el,this.$el.find("#pc-layers").html(b)},e.prototype.setLayersActive=function(a){var b;return this.$el.find("#pc-layers ul > li")&&(b=this.$el.find("#pc-layers ul > li").filter(function(b,c){return $(c).data("id")===a.id})),0===b.length?this.randerLayers():b.hasClass("active")?void 0:(this.$el.find("#pc-layers ul > li").removeClass("active"),b.addClass("active"))},e.prototype.updateModel=function(a){var c,d,e;return e=this.canvas.getItemByMyID(a),d=this.getModel(a),c=e.toJSON(["id","order","selectable","locked","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasBorders","hasControls","hasRotatingPoint","hoverCursor"]),$.each(c,function(a,c){return d.set(b.options.mappings.LAYER_DATA+"."+a,c)}),d.trigger("change")},e.prototype.getModel=function(a){return this.collection.find(function(b){return b.cid===a})},e.prototype.showTab=function(a){var b,c;return b=$(a.currentTarget),c=b.data("target"),b.closest("li").addClass("active").siblings("li").removeClass("active"),$(c).addClass("active").siblings(".fb-tab-pane").removeClass("active"),"#editField"!==c?this.unlockLeftWrapper():void 0},e.prototype.addOne=function(a,c,d){var e,f,g;return void 0!==a.attributes[b.options.mappings.LAYER_DATA]?(a.attributes.cid=a.cid,a.attributes[b.options.mappings.LAYER_DATA].id=a.cid,e=a.get(b.options.mappings.LAYER_DATA),e.object=a.get("object"),e.name=a.get("name"),e.type=a.get("type")):e={},"text"===a.get(b.options.mappings.TYPE)?(g=b.text,e.text=a.get("text")):g=b[a.get(b.options.mappings.TYPE)][a.get(b.options.mappings.NAME)],f=jQuery.extend(!0,{},g),(void 0===f.options||null===f.options)&&(f.options={}),f.options=jQuery.extend(!0,{},f.options,e),this.canvasView.add({type:f.object,template:f,model:a,canvas:this.canvas}),this.setDraggable()},e.prototype.setDraggable=function(){var a;return a=this.$el.find(".draggable"),a.draggable({handle:".handle",containment:".customizer-main"})},e.prototype.addAll=function(){return this.collection.each(this.addOne,this)},e.prototype.hideShowNoResponseFields=function(){return this.$el.find(".fb-no-response-fields")[this.collection.length>0?"hide":"show"]()},e.prototype.addField=function(a){var c,d;return c=$(a.currentTarget).data("field-name"),d=$(a.currentTarget).data("field-type"),this.createField(b.helpers.defaultLayersAttrs(c,d))},e.prototype.addTextLayer=function(a){var c,d;return d=$(a.currentTarget).closest(".fb-text-field-wrapper").find(".pc-text"),c={text:d.val()},d=d.val(""),this.createField(b.helpers.defaultLayersAttrs("text","text",c))},e.prototype.createField=function(a,b){var c;return c=this.collection.create(a,b),this.handleFormUpdate()},e.prototype.createAndShowEditView=function(a){var b,c;if(c=this.$el.find(".fb-field-wrapper").filter(function(){return $(this).data("cid")===a.cid}),c.addClass("editing").siblings(".fb-field-wrapper").removeClass("editing"),this.editView){if(this.editView.model.cid===a.cid)return this.$el.find('.fb-tabs a[data-target="#editField"]').click(),void this.scrollLeftWrapper(c);this.editView.remove()}return this.editView=new EditFieldView({model:a,parentView:this}),b=this.editView.render().$el,this.$el.find(".fb-edit-field-wrapper").html(b),this.$el.find('.fb-tabs a[data-target="#editField"]').click(),this.scrollLeftWrapper(c),this},e.prototype.ensureEditViewScrolled=function(){return this.editView?this.scrollLeftWrapper($(".fb-field-wrapper.editing")):void 0},e.prototype.scrollLeftWrapper=function(a){var b=this;return this.unlockLeftWrapper(),a[0]?$.scrollWindowTo(this.$el.offset().top+a.offset().top-this.$responseFields.offset().top,200,function(){return b.lockLeftWrapper()}):void 0},e.prototype.lockLeftWrapper=function(){},e.prototype.unlockLeftWrapper=function(){},e.prototype.handleFormUpdate=function(){return this.updatingBatch?void 0:(this.formSaved=!1,this.saveFormButton.removeAttr("disabled").text(b.options.dict.SAVE_FORM))},e.prototype.saveForm=function(a){var c;if(!this.formSaved)return this.formSaved=!0,this.saveFormButton.attr("disabled",!0).text(b.options.dict.ALL_CHANGES_SAVED),this.collection.sort(),c=JSON.stringify({fields:this.collection.toJSON()}),b.options.HTTP_ENDPOINT&&this.doAjaxSave(c),this.customizer.trigger("save",c)},e.prototype.doAjaxSave=function(a){var c=this;return $.ajax({url:b.options.HTTP_ENDPOINT,type:b.options.HTTP_METHOD,data:a,contentType:"application/json",success:function(a){var b,d,e,f;for(c.updatingBatch=!0,d=0,e=a.length;e>d;d++)b=a[d],null!=(f=c.collection.get(b.cid))&&f.set({id:b.id}),c.collection.trigger("sync");return c.updatingBatch=void 0}})},e}(Backbone.View),b=function(){function a(a){var b;null==a&&(a={}),_.extend(this,Backbone.Events),b=_.extend(a,{customizer:this}),this.mainView=new e(b),this.mainView}return a.helpers={defaultLayersAttrs:function(b,c,d){var e,f;return e={},e[a.options.mappings.TYPE]=c,e[a.options.mappings.NAME]=b,e.layer_data={},void 0!==d&&(e=_.extend(e,d)),f="text"===c?a.text:a[c][b],e.object=f.object,("function"==typeof f.defaultAttributes?f.defaultAttributes(e):void 0)||e}},a.options={BUTTON_CLASS:"fb-button",HTTP_ENDPOINT:"",HTTP_METHOD:"POST",AUTOSAVE:!0,CLEAR_FIELD_CONFIRM:!1,mappings:{TYPE:"type",NAME:"name",OBJECT:"object",LAYER:"layer",LAYER_DATA:"layer_data",ORDER:"order"},dict:{ALL_CHANGES_SAVED:"All changes saved",SAVE_FORM:"Save changes",UNSAVED_CHANGES:"You have unsaved changes. If you leave this page, you will lose those changes!"}},a.layers=[],a.backgrounds={},a.cliparts={},a.text={},a.fields={},a.inputFields={},a.nonInputFields={},a.addLayers=function(b){return a.layers.push(b)},a.registerField=function(b,c){var d,e,f,g;for(g=["view","edit"],e=0,f=g.length;f>e;e++)d=g[e],c[d]=_.template(c[d]);return a.fields[b]=c},a.registerBackgrounds=function(b,c){return void 0===c.type&&(c.type=b),void 0===c.object&&(c.object="image"),a.backgrounds[b]=c},a.registerText=function(){var b;return b={type:"text",object:"text"},a.text=b},a.registerClipArts=function(b,c){return void 0===c.type&&(c.type=b),void 0===c.object&&(c.object="image"),a.cliparts[b]=c},a}(),window.Customizer=b,"undefined"!=typeof module&&null!==module?module.exports=b:window.Customizer=b}.call(this),function(){Customizer.registerField("image",{view:"",edit:'<%= Customizer.templates["edit/color-picker"]({layer : layer, rf : rf}) %>'})}.call(this),function(){Customizer.registerField("text",{view:"",edit:'<%= Customizer.templates["edit/color-picker"]({rf : rf}) %>\n<%= Customizer.templates["edit/text-alignment"]({rf : rf}) %>\n<%= Customizer.templates["edit/text-style"]({rf : rf}) %>'})}.call(this),this.Customizer=this.Customizer||{},this.Customizer.templates=this.Customizer.templates||{},this.Customizer.templates["edit/base"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+=(null==(__t=Customizer.templates["edit/header"]())?"":__t)+"\n"+(null==(__t=Customizer.fields[rf.get(Customizer.options.mappings.OBJECT)].edit({rf:rf}))?"":__t)+"\n"+(null==(__t=Customizer.templates["edit/footer"]())?"":__t);return __p},this.Customizer.templates["edit/color-picker"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class=\'pc-color-wrapper\'>\r\n  	<div class="colorselector"><div class="background-color" style="background-color:'+(null==(__t=rf.get(Customizer.options.mappings.LAYER_DATA+".fill"))?"":__t)+'"></div></div>\r\n</div>';return __p},this.Customizer.templates["edit/footer"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="";return __p},this.Customizer.templates["edit/header"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="";return __p},this.Customizer.templates["edit/text-alignment"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="<div class='pc-alignment-wrapper'>\r\n  	\r\n</div>";return __p},this.Customizer.templates["edit/text-style"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="<div class='pc-style-wrapper'>\r\n  	<div class=\"pc-style-icon\"></div>\r\n</div>";return __p},this.Customizer.templates.page=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+="<div class='fb-left'>\n	<div class='pc-assets'>\n	  <ul class='fb-tabs'>\n	    <li class='active'><a data-target='#pc-backgrounds-panel'>Backgrounds</a></li>\n	    <li><a data-target='#pc-cliparts-panel'>Cliparts</a></li>\n	    <li><a data-target='#pc-text-panel'>Text</a></li>\n	  </ul>\n\n	  <div class='fb-tab-content'>\n	    "+(null==(__t=Customizer.templates["partials/panels/backgrounds"]())?"":__t)+"\n	    "+(null==(__t=Customizer.templates["partials/panels/cliparts"]())?"":__t)+"\n	    "+(null==(__t=Customizer.templates["partials/panels/text"]())?"":__t)+"\n	  </div>\n	</div>\n</div>\n<div class='fb-right'>\n	"+(null==(__t=Customizer.templates["partials/canvas"]())?"":__t)+"\n\n	"+(null==(__t=Customizer.templates["partials/edit"]())?"":__t)+"\n</div>\n"+(null==(__t=Customizer.templates["partials/layers"]())?"":__t)+"\n<div class='fb-clear'></div>\n\n<div class='fb-save-wrapper'>\n  <button class='js-save-data "+(null==(__t=Customizer.options.BUTTON_CLASS)?"":__t)+"'></button>\n</div>";return __p},this.Customizer.templates["partials/add_field"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<div class='fb-tab-pane active' id='addField'>\n  <div class='fb-add-field-types'>\n    <div class='section'>\n      ",_.each(_.sortBy(Customizer.inputFields,"order"),function(a){__p+='\n        <a data-field-type="'+(null==(__t=a.field_type)?"":__t)+'" class="'+(null==(__t=Customizer.options.BUTTON_CLASS)?"":__t)+'">\n          '+(null==(__t=a.addButton)?"":__t)+"\n        </a>\n      "}),__p+="\n    </div>\n\n    <div class='section'>\n      ",_.each(_.sortBy(Customizer.nonInputFields,"order"),function(a){__p+='\n        <a data-field-type="'+(null==(__t=a.field_type)?"":__t)+'" class="'+(null==(__t=Customizer.options.BUTTON_CLASS)?"":__t)+'">\n          '+(null==(__t=a.addButton)?"":__t)+"\n        </a>\n      "}),__p+="\n    </div>\n  </div>\n</div>\n";return __p},this.Customizer.templates["partials/canvas"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="<div class='pc-canvas'>\n  \n</div>\n";return __p},this.Customizer.templates["partials/edit"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="<div id=\"pc-edit-layer\" class='draggable pc-edit-layer'></div>\n";return __p},this.Customizer.templates["partials/layers"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="<div id=\"pc-layers\" class='draggable pc-layersbar'>\n	\n</div>\n";return __p},this.Customizer.templates["partials/panels/backgrounds"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<div class='fb-tab-pane active' id='pc-backgrounds-panel'>\n  <div class='fb-add-field-types'>\n    <div class='section'>\n      	",_.each(_.sortBy(Customizer.backgrounds,"order"),function(a){__p+='\n        	<a data-field-name="'+(null==(__t=a.name)?"":__t)+'" data-field-type="'+(null==(__t=a.type)?"":__t)+'" class="'+(null==(__t=Customizer.options.BUTTON_CLASS)?"":__t)+'">'+(null==(__t=a.addButton)?"":__t)+"</a>\n      	"}),__p+="\n    </div>\n  </div>\n</div>\n";return __p},this.Customizer.templates["partials/panels/cliparts"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<div class='fb-tab-pane ' id='pc-cliparts-panel'>\n  <div class='fb-add-field-types'>\n    <div class='section'>\n      	",_.each(_.sortBy(Customizer.cliparts,"order"),function(a){__p+='\n        	<a data-field-name="'+(null==(__t=a.name)?"":__t)+'" data-field-type="'+(null==(__t=a.type)?"":__t)+'" class="'+(null==(__t=Customizer.options.BUTTON_CLASS)?"":__t)+'">'+(null==(__t=a.addButton)?"":__t)+"</a>\n      	"}),__p+="\n    </div>\n  </div>\n</div>\n";return __p},this.Customizer.templates["partials/panels/text"]=function(obj){obj||(obj={});var __p="";with(obj)__p+='<div class=\'fb-tab-pane\' id=\'pc-text-panel\'>\n  <div class=\'fb-text-field-wrapper\'>\n  	<div class="input-field-container">\n	  	<label>Text</label>\n	  	<textarea class="pc-text" placeholder="Please enter text"></textarea>\n	</div>\n	<div class="input-field-container">\n		<input type="button" class="add-text fb-button pull-right" value="Add">\n	</div>\n  </div>\n</div>';return __p},this.Customizer.templates["view/edit"]=function(obj){obj||(obj={});var __p="";with(obj)__p+="";return __p},this.Customizer.templates["view/layers"]=function(obj){obj||(obj={});var __t,__p="";Array.prototype.join;with(obj)__p+="<div class=\"pc-container\">\n	<div class='pc-title handle'>Layers</div>\n  	<div class='pc-body'>\n  		<ul class=\"pc-layers-contianer\">\n  			",layers.length>0?(_.each(_.sortBy(layers,"order"),function(a){__p+="\n	  			",layer=a.toJSON(),__p+="\n				",active=a.canvas.getActiveObject(),__p+='\n		  		<li class="layers '+(null==(__t=void 0!==active&&null!==active&&active.id==a.id?"active":"")?"":__t)+'" data-id="'+(null==(__t=a.id)?"":__t)+'">\n		  			<!-- <span class="pc-layer-handel"><a href="javascript:" class="handel"><i class="fa fa-unsorted"> </i> </a></span> -->\n				    <span class="pc-image-contianer">\n				    	',__p+="text"==layer.type?'\n				    		<i class="fa fa-text-width"></i>\n				    	':'\n				    		<img width=50  src="'+(null==(__t=layer.src)?"":__t)+'">\n				    	',__p+='\n				    </span>\n				    <span class="pc-layer-title">\n				    	',__p+="text"==layer.type?"\n				    		"+(null==(__t=a.id)?"":__t)+" - "+(null==(__t=layer.text.substring(0,15))?"":__t)+"\n				    	":"\n							"+(null==(__t=a.id)?"":__t)+" - "+(null==(__t=layer.type)?"":__t)+"\n				    	",__p+='\n				    </span>\n					<span class="pc-layers-action">\n		  				<a href="javascript:" class="pc-layers-delete"><i class="fa fa-trash-o fa-1"> </i></a>\n						<a href="javascript:" class="pc-layers-lock-unlock"><i class="fa '+(null==(__t=1==a.locked?"fa-lock":"fa-unlock")?"":__t)+'"></i></a>\n		  			</span>\n		  		</li>\n		  		'}),__p+="\n\n		  	"):__p+='\n				<li class="layers no-found">No layer found.</li>\n		  	',__p+="\n	  	</ul>\n  	</div>\n</div>";return __p};